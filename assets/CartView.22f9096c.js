import{_ as h,u as n,a as u,o as r,c as _,b as t,t as l,d as m,n as k,w as v,v as C,p as I,e as K,m as B,r as p,f as q,g as w,F as S,h as x,i as y}from"./index.8638796c.js";import{B as P}from"./Breadcrumbs.640a87bb.js";var $="/assets/close.6023aa25.png";const T={props:["item"],data(){return{quantity:this.item.quantity,price:this.item.price*this.item.quantity,accessKey:"",colors:{red:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",blue:"\u0421\u0438\u043D\u0438\u0439",green:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",yellow:"\u0416\u0435\u043B\u0442\u044B\u0439",purple:"\u0424\u0438\u043E\u043B\u0435\u0442\u043E\u0432\u044B\u0439",pink:"\u0420\u043E\u0437\u043E\u0432\u044B\u0439",black:"\u0427\u0435\u0440\u043D\u044B\u0439",white:"\u0411\u0435\u043B\u044B\u0439"}}},methods:{setImage(e){return e.color.gallery===null?"/src/assets/img/not-available.png":e.color.gallery[0].file.url},changeQuantity(e){if(e==="-"){if(this.quantity--,this.quantity<=0){this.quantity=1;return}}else this.quantity++;this.accessKey=n().accessKey,u().updateBasketProduct(this.accessKey,this.item.id,this.quantity)},deleteItem(){this.accessKey=n().accessKey,console.log(this.accessKey),u().deleteBasketProduct(this.accessKey,this.item.id)},created(){this.accessKey=n().accessKey}}},b=e=>(I("data-v-3a5c8732"),e=e(),K(),e),V={class:"cart__item product"},L={class:"product__pic"},N=["src"],Q={class:"product__title"},A={class:"product__info product__info--color"},D=b(()=>t("span",{class:"product__code"}," \u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1501230 ",-1)),F={class:"product__counter form__counter"},M={class:"product__price"},z=b(()=>t("img",{src:$,alt:"close"},null,-1)),E=[z];function U(e,s,a,f,c,o){return r(),_("li",V,[t("div",L,[t("img",{src:o.setImage(a.item),width:"120",height:"120",alt:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430"},null,8,N)]),t("h3",Q,l(a.item.product.title),1),t("p",A,[m(" \u0426\u0432\u0435\u0442: "),t("span",null,[t("i",{style:k(`background-color: ${a.item.color.color.code}`)},null,4),m(" "+l(c.colors[a.item.color.color.title.toLowerCase()]),1)])]),D,t("div",F,[t("button",{onClick:s[0]||(s[0]=i=>o.changeQuantity("-"))},"-"),v(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=i=>c.quantity=i),name:"count",readonly:""},null,512),[[C,c.quantity]]),t("button",{onClick:s[2]||(s[2]=i=>o.changeQuantity("+"))},"+")]),t("b",M,l(c.price)+" \u20BD ",1),t("button",{class:"product__del button-del",type:"button","aria-label":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440 \u0438\u0437 \u043A\u043E\u0440\u0437\u0438\u043D\u044B",onClick:s[3]||(s[3]=(...i)=>o.deleteItem&&o.deleteItem(...i))},E)])}var j=h(T,[["render",U],["__scopeId","data-v-3a5c8732"]]);const G={data(){return{items:[],totalPrice:0}},components:{CartItem:j,Breadcrumbs:P},computed:{...B(u),computeItemsCount(){const e=this.items.length;return e===0?"\u041D\u0435\u0442 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432":e===1?"1 \u0442\u043E\u0432\u0430\u0440":[2,3,4].includes(e)?`${e} \u0442\u043E\u0432\u0430\u0440\u0430`:`${e} \u0442\u043E\u0432\u0430\u0440\u043E\u0432`}},methods:{redirectToCheckout(){if(this.totalPrice===0){alert("\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435 \u043F\u0443\u0441\u0442\u043E!");return}this.$router.push({name:"checkout"})},calculateTotal(){this.totalPrice=0,this.items.map(e=>{this.totalPrice+=e.price*e.quantity})}},created(){let e=n().accessKey;e===""&&(n().setAccessKey(),e=n().accessKey),u().getBasket(e),this.basketStore.$subscribe((s,a)=>{this.items=a.basket,this.calculateTotal()})}},H={class:"content container"},J={class:"content__top"},O={class:"content__row"},R=t("h1",{class:"content__title"}," \u041A\u043E\u0440\u0437\u0438\u043D\u0430 ",-1),W={class:"content__info"},X={class:"cart"},Y={class:"cart__field"},Z={class:"cart__list"},tt={class:"cart__block"},et=t("p",{class:"cart__desc"}," \u041C\u044B\xA0\u043F\u043E\u0441\u0447\u0438\u0442\u0430\u0435\u043C \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u043D\u0430\xA0\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C \u044D\u0442\u0430\u043F\u0435 ",-1);function st(e,s,a,f,c,o){const i=p("Breadcrumbs"),g=p("CartItem");return r(),_("main",H,[t("div",J,[q(i,{title:"\u041A\u043E\u0440\u0437\u0438\u043D\u0430"}),t("div",O,[R,t("span",W,l(o.computeItemsCount),1)])]),t("section",X,[t("form",{class:"cart__form form",onSubmit:s[1]||(s[1]=w(()=>{},["prevent"]))},[t("div",Y,[t("ul",Z,[(r(!0),_(S,null,x(c.items,d=>(r(),y(g,{item:d,key:c.items},null,8,["item"]))),128))])]),t("div",tt,[et,(r(),_("p",{class:"cart__price",key:c.totalPrice},[m(" \u0418\u0442\u043E\u0433\u043E: "),t("span",null,l(c.totalPrice)+" \u20BD",1)])),t("button",{class:"cart__button button button--primery",type:"submit",onClick:s[0]||(s[0]=(...d)=>o.redirectToCheckout&&o.redirectToCheckout(...d))}," \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437 ")])],32)])])}var ct=h(G,[["render",st]]);const it={__name:"CartView",setup(e){return(s,a)=>(r(),y(ct))}};export{it as default};
