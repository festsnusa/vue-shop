import{_ as p,u as l,a as u,o as r,c as _,b as t,t as n,d as m,n as b,w as y,v as C,p as v,e as w,m as I,r as h,f as B,g as K,F as D,h as x,i as A,j as S}from"./index.0b215802.js";import{B as q}from"./Breadcrumbs.0c0c436c.js";var E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVR4nO3ZTQqDMBAF4HeKPOkV2+MWbE9jKXUhRcQk8xeZt3Il8xFNZgiQyWQyV8odwORdBH41fGtpygPAAmB2xkxrDctaU3UKgOf6gjeAG+zDTQ2vnho8MZRCeGIojfDAUAthiaE2wgJjhtDEmCM0MG4ISYw7QgITBtGDCYdowYRF1GDCI85ghkEcYYZD7M0Q899zhEGteWWGW4lttp+T53DWlUt8Wtz5sSOMzVU52p2GwfDEFhsew4pzIiyGDYddOAw7TuwwGAq0He4YCvZObhgqNIDmGCp2sWYYi1a8aGMs54mihfEYioo0xnOyK1KYCONpkcBc5urtMpehmUwmg3D5AAklyc9YEtl/AAAAAElFTkSuQmCC";const G={props:["item"],data(){return{quantity:this.item.quantity,price:this.item.price*this.item.quantity,accessKey:"",colors:{red:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439",blue:"\u0421\u0438\u043D\u0438\u0439",green:"\u0417\u0435\u043B\u0435\u043D\u044B\u0439",yellow:"\u0416\u0435\u043B\u0442\u044B\u0439",purple:"\u0424\u0438\u043E\u043B\u0435\u0442\u043E\u0432\u044B\u0439",pink:"\u0420\u043E\u0437\u043E\u0432\u044B\u0439",black:"\u0427\u0435\u0440\u043D\u044B\u0439",white:"\u0411\u0435\u043B\u044B\u0439"}}},methods:{setImage(e){return e.color.gallery===null?"/src/assets/img/not-available.png":e.color.gallery[0].file.url},changeQuantity(e){if(e==="-"){if(this.quantity--,this.quantity<=0){this.quantity=1;return}}else this.quantity++;this.accessKey=l().accessKey,u().updateBasketProduct(this.accessKey,this.item.id,this.quantity)},deleteItem(){this.accessKey=l().accessKey,console.log(this.accessKey),u().deleteBasketProduct(this.accessKey,this.item.id)},created(){this.accessKey=l().accessKey}}},f=e=>(v("data-v-4def9fff"),e=e(),w(),e),T={class:"cart__item product"},Y={class:"product__pic"},M=["src"],Q={class:"product__title"},P={class:"product__info product__info--color"},U=f(()=>t("span",{class:"product__code"}," \u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1501230 ",-1)),O={class:"product__size"},V={class:"product__counter form__counter"},W={class:"product__price"},z=f(()=>t("img",{src:E,alt:"close"},null,-1)),F=[z];function N(e,s,o,g,c,i){return r(),_("li",T,[t("div",Y,[t("img",{src:i.setImage(o.item),width:"120",height:"120",alt:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430"},null,8,M)]),t("h3",Q,n(o.item.product.title),1),t("p",P,[m(" \u0426\u0432\u0435\u0442: "),t("span",null,[t("i",{style:b(`background-color: ${o.item.color.color.code}`)},null,4),m(" "+n(c.colors[o.item.color.color.title.toLowerCase()]),1)])]),U,t("span",O,"\u0420\u0430\u0437\u043C\u0435\u0440: "+n(o.item.size.title),1),t("div",V,[t("button",{onClick:s[0]||(s[0]=a=>i.changeQuantity("-"))},"-"),y(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>c.quantity=a),name:"count",readonly:""},null,512),[[C,c.quantity]]),t("button",{onClick:s[2]||(s[2]=a=>i.changeQuantity("+"))},"+")]),t("b",W,n(c.price)+" \u20BD ",1),t("button",{class:"product__del button-del",type:"button","aria-label":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440 \u0438\u0437 \u043A\u043E\u0440\u0437\u0438\u043D\u044B",onClick:s[3]||(s[3]=(...a)=>i.deleteItem&&i.deleteItem(...a))},F)])}var R=p(G,[["render",N],["__scopeId","data-v-4def9fff"]]);const Z={data(){return{items:[],totalPrice:0}},components:{CartItem:R,Breadcrumbs:q},computed:{...I(u),computeItemsCount(){const e=this.items.length;return e===0?"\u041D\u0435\u0442 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432":e===1?"1 \u0442\u043E\u0432\u0430\u0440":[2,3,4].includes(e)?`${e} \u0442\u043E\u0432\u0430\u0440\u0430`:`${e} \u0442\u043E\u0432\u0430\u0440\u043E\u0432`}},methods:{redirectToCheckout(){if(this.totalPrice===0){alert("\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0435 \u043F\u0443\u0441\u0442\u043E!");return}this.$router.push({name:"checkout"})},calculateTotal(){this.totalPrice=0,this.items.map(e=>{this.totalPrice+=e.price*e.quantity})}},created(){let e=l().accessKey;e===""&&(l().setAccessKey(),e=l().accessKey),u().getBasket(e),this.basketStore.$subscribe((s,o)=>{this.items=o.basket,this.calculateTotal()})}},$={class:"content container"},j={class:"content__top"},L={class:"content__row"},H=t("h1",{class:"content__title"}," \u041A\u043E\u0440\u0437\u0438\u043D\u0430 ",-1),X={class:"content__info"},J={class:"cart"},tt={class:"cart__field"},et={class:"cart__list"},st={class:"cart__block"},ct=t("p",{class:"cart__desc"}," \u041C\u044B\xA0\u043F\u043E\u0441\u0447\u0438\u0442\u0430\u0435\u043C \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 \u043D\u0430\xA0\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C \u044D\u0442\u0430\u043F\u0435 ",-1);function ot(e,s,o,g,c,i){const a=h("Breadcrumbs"),k=h("CartItem");return r(),_("main",$,[t("div",j,[B(a,{title:"\u041A\u043E\u0440\u0437\u0438\u043D\u0430"}),t("div",L,[H,t("span",X,n(i.computeItemsCount),1)])]),t("section",J,[t("form",{class:"cart__form form",onSubmit:s[1]||(s[1]=K(()=>{},["prevent"]))},[t("div",tt,[t("ul",et,[(r(!0),_(D,null,x(c.items,d=>(r(),A(k,{item:d,key:c.items},null,8,["item"]))),128))])]),y(t("div",st,[ct,(r(),_("p",{class:"cart__price",key:c.totalPrice},[m(" \u0418\u0442\u043E\u0433\u043E: "),t("span",null,n(c.totalPrice)+" \u20BD",1)])),t("button",{class:"cart__button button button--primery",type:"submit",onClick:s[0]||(s[0]=(...d)=>i.redirectToCheckout&&i.redirectToCheckout(...d))}," \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437 ")],512),[[S,c.items.length]])],32)])])}var it=p(Z,[["render",ot]]);const nt={__name:"CartView",setup(e){return(s,o)=>(r(),A(it))}};export{nt as default};
